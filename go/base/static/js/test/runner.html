<!DOCTYPE html>
<html>
  <head>
    <title>Mocha</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" href="vendor/mocha.css" />
  </head>
  <body>
    <div id="mocha"></div>
    <script src="vendor/mocha.js"></script>
    <script src="vendor/chai.js"></script>
    <script src="vendor/sinon.js"></script>

    <script src="../vendor/uuid-1.4.0.js"></script>
    <script src="../vendor/jquery-1.9.1.js"></script>
    <script src="../vendor/jquery.ui-1.10.3.js"></script>
    <script src="../vendor/jquery.jsPlumb-1.4.1.leakfix.js"></script>
    <script src="../vendor/lodash.underscore-1.2.1.js"></script>
    <script src="../vendor/backbone-1.0.0.js"></script>

    <script src="helpers.js"></script>

    <script>
      window.assert = chai.assert;
      window.globals = {};
      window.JST = {};

      mocha
        .ui('bdd')
        .reporter('html');

      window.templates = [
        'campaign/dialogue/states/choice/edit.jst',
        'campaign/dialogue/states/choice/preview.jst',
        'campaign/dialogue/states/freetext/edit.jst',
        'campaign/dialogue/states/freetext/preview.jst',
        'campaign/dialogue/states/end/edit.jst',
        'campaign/dialogue/states/end/preview.jst'
      ];

      window.templates.forEach(helpers.loadTemplate);
    </script>

    <!--
    NOTE: Ordering is important here. Having Backbone.rpc after
    Backbone-relational results in endless recursion.
    -->
    <script src="../vendor/backbone-rpc-0.1.1.js"></script>
    <script src="../vendor/backbone-relational-0.8.5.js"></script>

    <script src="../src/go.js"></script>
    <script src="../src/errors.js"></script>
    <script src="../src/utils.js"></script>

    <script src="../src/components/components.js"></script>
    <script src="../src/components/models.js"></script>
    <script src="../src/components/views.js"></script>
    <script src="../src/components/structures.js"></script>
    <script src="../src/components/stateMachine.js"></script>
    <script src="../src/components/plumbing/plumbing.js"></script>
    <script src="../src/components/plumbing/endpoints.js"></script>
    <script src="../src/components/plumbing/states.js"></script>
    <script src="../src/components/plumbing/connections.js"></script>
    <script src="../src/components/plumbing/diagrams.js"></script>
    <script src="../src/components/tables.js"></script>

    <script src="../src/campaign/campaign.js"></script>
    <script src="../src/campaign/interactive.js"></script>
    <script src="../src/campaign/routing/routing.js"></script>
    <script src="../src/campaign/routing/models.js"></script>
    <script src="../src/campaign/routing/views.js"></script>
    <script src="../src/campaign/dialogue/dialogue.js"></script>
    <script src="../src/campaign/dialogue/models.js"></script>
    <script src="../src/campaign/dialogue/connections.js"></script>
    <script src="../src/campaign/dialogue/states/states.js"></script>
    <script src="../src/campaign/dialogue/states/choice.js"></script>
    <script src="../src/campaign/dialogue/states/freetext.js"></script>
    <script src="../src/campaign/dialogue/states/end.js"></script>
    <script src="../src/campaign/dialogue/diagram.js"></script>

    <script src="tests/testHelpers/testHelpers.js"></script>
    <script src="tests/testHelpers/testHelpers.test.js"></script>
    <script src="tests/testHelpers/rpc.js"></script>
    <script src="tests/errors.test.js"></script>
    <script src="tests/utils.test.js"></script>
    <script src="tests/components/models.test.js"></script>
    <script src="tests/components/views.test.js"></script>
    <script src="tests/components/structures.test.js"></script>
    <script src="tests/components/stateMachine.test.js"></script>
    <script src="tests/components/plumbing/testHelpers.js"></script>
    <script src="tests/components/plumbing/endpoints.test.js"></script>
    <script src="tests/components/plumbing/states.test.js"></script>
    <script src="tests/components/plumbing/connections.test.js"></script>
    <script src="tests/components/plumbing/diagrams.test.js"></script>
    <script src="tests/components/tables.test.js"></script>
    <script src="tests/campaign/routing/testHelpers.js"></script>
    <script src="tests/campaign/routing/models.test.js"></script>
    <script src="tests/campaign/routing/views.test.js"></script>
    <script src="tests/campaign/dialogue/testHelpers.js"></script>
    <script src="tests/campaign/dialogue/models.test.js"></script>
    <script src="tests/campaign/dialogue/states/states.test.js"></script>
    <script>
      if (window.mochaPhantomJS) { mochaPhantomJS.run(); }
      else { mocha.run(); }
    </script>
  </body>
</html>

{% load url from future %}
{% load conversation_tags %}
<table class="table table-bordered table-striped">
    <thead>
        <tr>
            <th width="32">Type</th>
            <th>Response</th>
            <th width="70">Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for message in message_page.object_list %}
        <tr>
            {% get_contact_for_message user_api message as contact %}
            <td><i class="icon-repeat"></i> {{conversation.delivery_class}}</td>
            <td>
                <h6><a href="{% url 'contacts:person' person_key=contact.key %}">{{contact}}</a> via {{message.transport_type}} - {{message.timestamp}}</h6>
                <p>{{message.content}}</p></td>
            <td><a href="#" class="btn" title="Reply"><i class="icon-repeat"></i> Reply</a></td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="3">No one has replied yet</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% if message_page.paginator.count %}
<div class="pagination pagination-centered">
    <ul>
        {% if message_page.has_previous %}
        <li>
            <a href="?direction={{message_direction}}&amp;p={{message_page.previous_page_number}}&amp;q={{query}}&amp;token={{token}}">
                Prev
            </a>
        </li>
        {% else %}
        <li class="disabled">
            <a href="#">Prev</a>
        </li>
        {% endif %}
        {% for page_number in message_page_range %}
            <li class="{% if page_number == message_page.number %}active{% endif %}">
                <a href="?direction={{message_direction}}&amp;p={{page_number}}&amp;q={{query}}&amp;token={{token}}">{{page_number}}</a>
            </li>
        {% endfor %}
        {% if message_page.has_next %}
        <li>
            <a href="?direction={{message_direction}}&amp;p={{message_page.next_page_number}}&amp;q={{query}}&amp;token={{token}}">
                Next
            </a>
        </li>
        {% else %}
        <li class="disabled">
            <a href="#">Next</a>
        </li>
        {% endif %}
    </ul>
</div>
{% endif %}
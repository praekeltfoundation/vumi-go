{% extends "app.html" %}

{% block main %}
    <form id="conversation" name="conversation" enctype="multipart/form-data" method="post" action="">
    {% csrf_token %}
    <div class="row">
        <div class="span12">
            <div class="pull-right padtop">
                <input type="button" class="btn" value="Back" onclick="javascript:history.go(-1)">
            </div>
            <div class="pull-right padtop" style="margin-right: 10px">
                <input type="submit" name="submit" class="btn btn-success" value="Next">
            </div>
            <div id="welcome">
                <h1>Message Recipients</h1>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="span12">
            {% include "base/includes/messages.html" %}
        </div>
    </div>
    <div class="row">
        <div class="span4">
            <div class="box shadow conv-disabled">
                <h3>1. Message Details</h3>
                <br>
                <fieldset>
                    <div class="control-group">
                        <label class="control-label" for="input01">Conversation Name</label>
                        <div class="controls">{{form.subject}}{{form.subject.errors}}</div>
                    </div>
                    <div class="control-group">
                        <label class="control-label" for="cmessage">Message <span id="charcount" class="label label-info">0</span></label>
                        <div class="controls">{{form.message}}{{form.message.errors}}</div>
                    </div>
<!--                      
                    <div class="control-group">
                        <label class="control-label" for="inlineCheckboxes">Conversation Locations</label>
                        <table class="table table-condensed" style="width: 90%">
                        <tbody>
                        <tr>
                            <td>
                                <label class="checkbox inline"><input type="checkbox" id="inlineCheckbox1" value="option1" name="channel"> Txt</label>
                            </td>
                            <td>
                                <label class="checkbox inline"><input type="checkbox" id="inlineCheckbox2" value="option2" name="channel"> IM</label>
                            </td>
                            <td>
                                <label class="checkbox inline"><input type="checkbox" id="inlineCheckbox3" value="option3" name="channel"> BBM</label>    
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label class="checkbox inline"><input type="checkbox" id="inlineCheckbox4" value="option4" name="channel"> Twitter</label>
                            </td>
                            <td>
                                <label class="checkbox inline"><input type="checkbox" id="inlineCheckbox5" value="option5" name="channel"> Facebook</label>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="3">
                                <label for="channel" class="error" style="display: none">Please select at least one channel for your message.</label>
                            </td>
                        </tr>
                        </tbody>
                        </table>
                    </div>
                    <div class="control-group">
                        <label class="control-label" for="select01">Pick a shortcode</label>
                        <div class="controls">
                         <select id="select01" class="input-medium"> 
                             <option>32329</option>
                             <option>32323</option>
                             <option>32973</option> 
                             <option>32328</option> 
                             <option>32975</option> 
                             <option>39571</option> 
                             <option>32324</option> 
                             <option>A longcode is suitable</option>
                         </select>
                        </div>
                    </div>
-->
                    <div class="control-group">
                        <label class="control-label" for="cdate">Date</label>
                        <div class="controls">
                            <div class="input-prepend">
                                <span class="add-on"><i class="icon-calendar"></i></span>
                                {{form.start_date}}
                            </div>
                        </div>          
                    </div>
                    <div class="control-group">
                        <label class="control-label" for="ctime">Time</label>
                        <div class="controls">
                            <div class="input-prepend">
                            <span class="add-on"><i class="icon-time"></i></span>
                          {{form.start_time}}
                            </div>
                        </div>          
                    </div>
                    <div class="btn-toolbar">
                        <div class="btn-group"><input type="submit" class="btn btn-primary" value="Next &rarr;" disabled></div>
                        <div class="btn-group"><input type="reset" class="btn" value="Cancel" disabled></div>
                    </div>
                </fieldset>
            </div>
        </div>
        <div class="span4">
                <div class="box shadow">
                    <h3>2. Message Recipients</h3>
                    <br><a name="step2" id="step2"></a>
                    <form class="" method="post" action="new-conversation-3.html" id="newconv2">
                    <fieldset>
                                  
                      
                        <label class="control-label" for="input01">Select which contact(s) you'd like to message:</label>
                        <table class="table table-condensed">
                                <tbody>
                                  <tr>
                                    <td>
                                     
                                        <label class="checkbox inline">
                                            <input type="checkbox" id="inlineCheckbox1" value="option1" name="group"> Tomato Farmers
                                        </label>
                                        <span class="label label-info pull-right">99</span>
                                    </td>
                                    <td>
                                        <label class="checkbox inline">
                                            <input type="checkbox" id="inlineCheckbox2" value="option2" name="group"> Cocoa Farmers
                                        </label>
                                        <span class="label label-info pull-right">99</span>
                                    </td>
                                  </tr>
                                  <tr>
                                    <td>
                                     
                                        <label class="checkbox inline">
                                            <input type="checkbox" id="inlineCheckbox3" value="option3" name="group"> Kenaf Farmers
                                        </label>
                                        <span class="label label-info pull-right">99</span>
                                    </td>
                                    <td>
                                        <label class="checkbox inline">
                                            <input type="checkbox" id="inlineCheckbox4" value="option4" name="group"> Tobacco Farmers
                                        </label>
                                        <span class="label label-info pull-right">99</span>
                                    </td>
                                  </tr>
                                  <tr>
                                    <td>
                                     
                                        <label class="checkbox inline">
                                            <input type="checkbox" id="inlineCheckbox5" value="option5" name="group"> Market Agents
                                        </label>
                                        <span class="label label-info pull-right">99</span>
                                    </td>
                                    <td>
                                        
                                    </td>
                                  </tr>
                                  
                                  <tr><td colspan="2"><label for="group" class="error" style="display: none">Please select at least one group of recipients for your message.
                                  </label></td></tr>
                                  
                                </tbody>
                              </table>
                     
                                <div class="btn-toolbar">
                                <div class="btn-group"><input type="submit" class="btn btn-primary" value="Next &rarr;"></div>
                                <div class="btn-group"><input type="reset" class="btn" onClick="javascript:history.go(-1)" value="Go Back"></div>
                                <div class="btn-group"><input type="reset" class="btn" value="Cancel"></div>
                                </div>
                                
                                
                                                                                          
                            </fieldset>
                            
                            </form>
                    
                </div>
            </div>
    </div>






















    <div id="main">
        <div class="inner">
            {% include "base/includes/messages.html" %}
            {# TODO: fix notifications properly with Django messages framework #}
            {# <div class="notification success"> #}
            {#     <strong>999 New Contacts Added to "Market Agents"</strong> - 3 duplicates and 20 invalid records found #}
            {# </div> #}
            <div id="progress-bar">
                <ul>
                    <li class="pre-active">Message</li><li class="active">People</li><li>Send</li>
                </ul>
            </div>
            <div class="wide-box">
                <div id="conv-box">
                    <div id="form-filter">
                        <ul>
                            <li id="groups" class="active">
                                <a href="{% url conversations:people conversation_pk=conversation.pk %}">Groups</a>
                            </li>
                            <li id="upload">
                                <a href="{% url conversations:upload conversation_pk=conversation.pk %}">Upload...</a>
                            </li>
                        </ul>
                    </div><label class="group-label">Select which group(s) you'd like to message:</label>
                    <div id="groups-list">
                        {% for group in user.contactgroup_set.all %}
                        <div class="group {% if forloop.first %}first{% endif %}">
                            <input type="checkbox" name="groups" value="{{group.pk}}" class="group-check"> 
                            <span class="group-name">{{group.name}}</span>
                            <span class="group-member-count">{{group.contact_set.count}}</span>
                        </div>
                        {% empty %}
                        <div class="group first">
                            <p>
                                You don't have any groups defined yet. 
                                Upload a set of contacts to create your
                                first group.
                            </p>
                        </div>
                        {% endfor %}
                    </div>
                    <div id="delivery-class-list">
                        <label>Select a delivery class:</label>
                        {{delivery_class.delivery_class}}
                    </div>
                </div>
                <div id="preview-box">
                    <div id="preview-pane">
                        <span class="sender">{{user_profile}}:</span> <span class="preview-message">{{conversation.message}}</span>
                    </div>
                </div>
                <div class="clear"></div>
            </div>
            <div class="clear">
                &nbsp;
            </div>
        </div>
    </div>
</form>
{% endblock %}
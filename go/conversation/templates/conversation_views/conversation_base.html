{% extends "app.html" %}
{% load url from future %}
{% load conversation_tags %}


{% block content_extraclass %}campaigns{% endblock %}

{% block content_breadcrumbs %}
    {# TODO: Use bootstrap breadcrumbs #}
    <a href="{% conversation_screen conversation %}">Details</a>
    {% if not conversation %}
        <a href="#">Messages</a>
        <a href="#">Contacts</a>
        <a href="#">Preview &amp; Activate</a>
    {% else %}
        {# TODO: Make real conversation screens for these? #}
        <a href="{% url 'conversations_tmp:message' conversation.key %}">Messages</a>
        <a href="{% url 'conversations_tmp:contacts' conversation.key %}">Contacts</a>
        <a href="{% url 'conversations_tmp:preview' conversation.key %}">Preview &amp; Activate</a>
    {% endif %}
{% endblock %}

{% block content_actions_right %}
    <a href="{% url 'conversations:index' %}">Cancel</a>
    <button class="btn btn-primary" data-action="draft">Save draft</button>
    <button class="btn btn-primary" data-action="save">Next step</button>
{% endblock %}

{% block content_main_header %}
    <div class="row-fluid">
        <div class="span12">
            {% include "base/includes/messages.html" %}
        </div>
    </div>
{% endblock %}

{% block ondomready %}
    $('.actions .right button').on('click', function(e) {
        e.preventDefault();
        var $form = $('form');
        // append the action of the button, draft or save.
        $form.prepend('<input type="hidden" name="action" value="' + $(this).attr('data-action') + '">');
        $form.submit();
    });    
{% endblock %}
